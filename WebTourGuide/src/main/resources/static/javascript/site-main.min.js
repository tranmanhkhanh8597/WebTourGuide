
jQuery(function($){$(".fs-mobile-trigger").click(function(e){e.preventDefault();$('.fs-mobile-trigger').toggleClass('open');$('.mobile-nav-container').stop(true,true).slideToggle(200);});$(".like-trigger").click(function(e){e.preventDefault();$(this).toggleClass('liked');});$(".datepicker").each(function(){$(this).data('pikaday',new Pikaday({field:$(this)[0],format:'DD MM YYYY'}));$(this).data('pikaday').setDate(moment().add(1,'days').format('YYYY-MM-DD'));});$(".fancybox").fancybox();$("a.smooth-scroll").on('click',function(e){var target=$(this).attr('href');if($(target).size()){e.preventDefault();$('html,body').animate({scrollTop:$(target).eq(0).offset().top-20},'normal');}});$("[data-reveal-target]").each(function(){$(this).attr('data-open-text',$(this).text());if(!$(this).attr('data-close-text'))$(this).attr('data-close-text',$(this).attr('data-open-text'));$(this).click(function(e){e.preventDefault();if($(this).hasClass('open')){$(this).text($(this).attr('data-open-text'));$(this).removeClass('open');$($(this).attr('data-reveal-target')).slideUp();}else{$(this).text($(this).attr('data-close-text'));$(this).addClass('open');$($(this).attr('data-reveal-target')).slideDown();}});});if($(".tour-donut").size()){var fills=$(".tour-donut").attr('data-level');var svg_chart_holder=$(".tour-donut");$.get(svg_chart_holder.attr('data-src'),null,function(data){var svgNode=$("svg",data);var docNode=document.adoptNode(svgNode[0]);svg_chart_holder.html(docNode);var svg_chart=$("> svg",svg_chart_holder);svg_chart.removeAttr('height');svg_chart.removeAttr('width');svg_chart.css('height','100%');svg_chart.css('width','100%');svg_chart.after('<div class="fill_number">'+fills+'</div>');});}
if($("#tour-svg-map").size()){var svg_map_holder=$("#tour-svg-map");$.get(svg_map_holder.attr('data-src'),null,function(data){var anchors={};$('>[data-group-id]',svg_map_holder).each(function(){anchors[$(this).attr('data-group-id')]=$(this).attr('data-link');});var svgNode=$("svg",data);var docNode=document.adoptNode(svgNode[0]);svg_map_holder.html(docNode);var svg_map=$("> svg",svg_map_holder);svg_map.removeAttr('height');svg_map.removeAttr('width');svg_map.css('height','100%');svg_map.css('width','100%');svg_map.after('<div id="svg-map-label" data-showing="0"></div>');var svg_label=$("#svg-map-label",svg_map_holder);$("> g",svg_map).hover(function(){if(svg_label.attr('data-showing')==false){svg_label.text($(this).attr('id').replace(/_/g,' '));var bBox=$(this).get(0).getBBox();var scale=svg_map.width()/svg_map.get(0).getBBox().width;var position={left:(bBox.x+(bBox.width/2))*scale,top:(bBox.y)*scale};svg_label.css(position);svg_label.attr('data-showing',1);}},function(){svg_label.attr('data-showing',0);});$("> g",svg_map).click(function(e){e.preventDefault();if(typeof(anchors[$(this).attr('id')])!='undefined'){window.location=anchors[$(this).attr('id')];}});},'xml');}
if($(".activity-grid").size()){var activity_grid=$(".activity-grid");var checkboxes=$("[type='checkbox']",activity_grid);var is_changing=false;$("label",activity_grid).on('click.rangeit',function(e){if(is_changing)return false;is_changing=true;e.preventDefault();var checked=$(":checked",activity_grid);var current=$(this).parent().index();var start=activity_grid.data('start_check')?activity_grid.data('start_check'):checked.eq(0).parent().index();var end=activity_grid.data('end_check')?activity_grid.data('end_check'):checked.eq(checked.length-1).parent().index();if(Math.abs(current-start)>=Math.abs(current-end)){end=current;}
else{start=current;}
activity_grid.data('start_check',start);activity_grid.data('end_check',end);checkboxes.prop('checked',false).change();$("li",activity_grid).removeClass('highlight');checkboxes.each(function(){var the_index=$(this).parent().index();if(the_index>=start&&the_index<=end){$(this).prop('checked',true).change();if(the_index!=end){$(this).parent('li').addClass('highlight');}}});is_changing=false;});$(":checked",activity_grid).eq(0).next('label').trigger('click.rangeit');}
$(".number-counter").each(function(){var self=$(this);var characters=$(this).text().split("");self.empty();$.each(characters,function(i,el){self.append("<span>"+el+"</span>");});})
$(".toggle-box").each(function(){var box=$(this);box.data('options',$.parseJSON(box.attr('data-options')));box.data('selected',box.attr('data-selected'));box.on('click',function(e){e.preventDefault();var options=box.data('options');var option_length=Object.keys(options).length;var selected=box.data('selected');var current_index=-1;for(var i=0;i<option_length;i++){if(Object.keys(options)[i]==selected){current_index=i;break;}}
current_index++;if(current_index>=option_length)current_index=-1;var holder=box.closest('.posts-order-holder');$(".toggle-box",holder).each(function(){$(this).attr('data-selected','');$(this).data('selected','');$("span",this).remove();});if(current_index<0){selected='';}else{selected=Object.keys(options)[current_index];}
box.attr('data-selected',selected);box.data('selected',selected);$("span",box).remove();if(value=options[selected]){$("p",box).append('<span>'+value+'</span>');}});});});jQuery(window).load(function(){jQuery('.blog-masonry').packery({itemSelector:'.item',gutter:0});jQuery('.region-masonry').packery({itemSelector:'.item',gutter:0});});